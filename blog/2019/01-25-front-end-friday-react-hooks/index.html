<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.28757d30284033430aac.css" data-identity="gatsby-global-css">:root{--yellow-color:#fff49a;--pink-color:#ff4081;--blue-color:#1597ff;--base-height:1.4rem;--base-font-size:1rem;--sm:0.8750rem}*{box-sizing:border-box}body,html{background-color:#fff;font-family:Source Sans Pro,system,system-ui,-apple-system,BlinkMacSystemFont,Roboto,Helvetica,Arial,sans-serif;font-size:var(--base-font-size);margin:0}h1{color:var(--pink-color);display:inline-block;margin:.25rem 0;padding:.75rem 0}h2{color:var(--blue-color);font-size:1.2rem;line-height:var(--base-height);text-transform:uppercase}small{color:#666;display:block;font-size:var(--sm)}footer{margin-top:1.375rem}.post__body,ol,p{font-size:var(--base-font-size);line-height:var(--base-height);margin:calc(var(--base-height)/2) 0}img{max-width:100%}a{color:#222;font-style:italic}a,strong{line-height:var(--base-height)}a:hover{color:#888}figure{margin:0}figcaption{line-height:1.45rem}figcaption p{color:#333}blockquote{border-left:4px solid var(--blue-color);font-size:1.125rem;font-style:italic;margin:.5rem calc(var(--base-font-size)*2);padding:var(--base-font-size)}hr{border:1px solid var(--pink-color);margin-top:calc(var(--base-font-size)*2)}img[on-error]{display:none}.home-layout__container{grid-gap:var(--base-font-size);display:grid;grid-template-areas:"image" "about" "blog-list"}.home-layout__main-img{grid-area:image}.home-layout__about{grid-area:about}@media screen and (min-width:48rem){.home-layout__about{padding:0 1rem}}.home-layout__blog-list{grid-area:blog-list}.header--archive{align-items:center;display:flex;justify-content:space-between}@media screen and (min-width:700px){h1{padding:.75rem calc(var(--base-font-size)*1.5)}.home-layout__container{grid-template-areas:"image image about about" "blog-list blog-list blog-list blog-list"}}h3{background:linear-gradient(180deg,hsla(0,0%,100%,0) 45%,var(--yellow-color) 45%);display:inline}.figure__image{display:block;margin:.9rem auto;min-height:144px}.btn{border-bottom:4px solid var(--blue-color);color:#000;font-style:normal;font-weight:600;padding:calc(var(--base-font-size)/2) 2px;text-decoration:none}.btn:hover{background-color:var(--blue-color);color:#fff}.list--no-style,.task-list-item{list-style-type:none}.list--no-style{padding-left:0}.list--side-pink{margin-left:0;padding:calc(var(--base-font-size)/2) var(--base-font-size)}.list--side-pink li a{display:flex;font-style:normal;justify-content:space-between;padding:var(--base-font-size) calc(var(--base-font-size)/4);text-decoration:none}.list--side-pink li a:hover{color:var(--blue-color)}.list--side-pink li a div:first-child{max-width:60vw}.tags{background-color:#eee;border-radius:3px;display:inline-block;font-size:.75rem;line-height:var(--sm);margin:calc(var(--base-font-size)/2) calc(var(--base-font-size)/2) var(--base-font-size) 0;padding:calc(var(--base-font-size)/2)}.breadcrumbs{font-size:var(--sm);line-height:1.5714rem;list-style-type:none;margin-top:0;padding-left:0}.breadcrumbs li{display:inline-block}.breadcrumbs li~li:before{content:"//";margin-left:.5rem;margin-right:.5rem}.code-inline,:not(pre)>code[class*=language-]{background-color:#000!important;border:1px solid #fff;border-radius:3px!important;color:#fff;font-family:monospace;font-size:.9rem;line-height:22px;padding:.2rem!important;text-shadow:none}.twitter-tweet-rendered{margin-left:auto;margin-right:auto}.u--text-center{display:block;text-align:center}.u--padding-20{padding:20px}.u--padding-bottom-20{padding-bottom:20px}.img--responsive,.u--media-center{display:block;margin:0 auto}.img--responsive{max-width:100%}.gatsby-highlight{font-size:var(--sm)}</style><meta name="generator" content="Gatsby 4.3.0"/><title data-react-helmet="true">Front-end Friday: React Hooks - Cindy | Front-end Engineer</title><link data-react-helmet="true" rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFwSURBVHjavJfBrYMwDEDTry7Av/0rHYEV0hFYoRx7/BkBjj2GFTJCuwIjfK69lRGovxSkCDmJSU0sWQhDyKvt2s5hnmcRktfPzb2VoBd7LVavPkANaL8Yvp9XEZOjoMsvaBt4Lq1WoAp0onz0i7h5HdnclYuFFZwArdgm/wAlF0Dt+VgHegZtQAePJ1hyANu8t3F2E/Bv9U7F5QGJ2MzqfrQQsXXJObCbHBPXFYht2AtgQNwpkTCoFABKCEZPhpccIaAAGI9d5wKY3Pq+CoPOAbAUnckTCp0DYAwk2UcQW+pAbz3BCrG1ECluiJRKqGwD8kG0ewMs4WgCrVjuDRCD0DkAsLbstvA6VzfsPOWaFAZKM7ojzUkhEDplIKEAUH6JSQXgGkim1IUpAAXRxgbwQFxbIpNzbB3rRHR3sr/yHERII9qBcDYskZGbIic4G45cI1nHVBuSk1B5pqIt1fHjf0Fjj2ImUAvOgf6AyluAAQBrFE4nht1sxgAAAABJRU5ErkJggg=="/><meta data-react-helmet="true" name="description" content="I build web applications using JavaScript."/><meta data-react-helmet="true" name="keywords" content="software engineer, front-end, web development, javascript, angular, react, front-end engineer, front-end dev"/><link rel="icon" href="/favicon-32x32.png?v=3e995c222532b44b960d8c4ea296fa7e" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#FF4081"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=3e995c222532b44b960d8c4ea296fa7e"/><link as="script" rel="preload" href="/webpack-runtime-f7abbf0acb99d8d26251.js"/><link as="script" rel="preload" href="/framework-7d6d54381d658fb1dc5f.js"/><link as="script" rel="preload" href="/app-dd1ac8466996539df542.js"/><link as="script" rel="preload" href="/40f2c7494120b20d44a1314385d207a616dd714f-94d45befc4d94b9ad0c0.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-79f2d3b703f0e02d9f2f.js"/><link as="fetch" rel="preload" href="/page-data/blog/2019/01-25-front-end-friday-react-hooks/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main style="margin:0 auto;max-width:50.8rem;padding:2.5rem 1.0875rem .05rem"><article><ul class="breadcrumbs"><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li>Front-end Friday: React Hooks</li></ul><header><h1 style="visibility:hidden;height:0;width:0;display:block;padding:0;margin:0">Blog Post</h1><h2>Front-end Friday: React Hooks</h2><div>January 25, 2019</div><div class="tags">dev</div><div class="tags">react</div><div class="tags">front-end friday</div></header><section><div class="post__body"><p>You may have already heard of React Hooks by now. If you're like me, you probably are looking forward to learning more about when/how to use them and trying it out for yourself. You might look at the docs or find some tutorial to follow along until it makes sense. However, it really isn't the same as actually putting it to use yourself, right?</p>
<p>I've read several tweets about React Hooks and even bookmarked the video where <a href="https://www.youtube.com/watch?v=dpw9EHDh2bMhttps://youtu.be/dpw9EHDh2bM?t=685" target="_blank" rel="noopener">Dan Abramov introduces hooks at React Conf</a>. Based on the tweets I've read, I figured I should be able to utilize hooks in reusable components. I decided to write about my first attempt in using Hooks while watching Dans' video in a kind of stream of consciousness format.</p>
<h3>What are hooks?</h3>
<p>As of React v16.8.0-alpha.0 (React 16.8 official), there are these new things called Hooks that allow for using state and other features without having to write a <code>Class</code>. They allow you to reuse state logic with each hook handling a different aspect of it.</p>
<p>The first one mentioned was <code>useState</code> which is used for declaring a state variable - think <code>this.state</code> and <code>this.setState()</code>. Then, there's <code>useEffect</code> - remember some of the logic you'd put in <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code>? That's pretty much what's going on there - telling your component to do something after render.</p>
<p>Those are two of the basic hooks and I think a good starting point for getting introduced to this idea.</p>
<h3>Using state before hooks</h3>
<p>I saw someone post that hooks would be useful with accordions and tabs. Unfortunately, the tutorial they linked then went on to build something else so that's how I decided that those are the components I'd build here.</p>
<p>Those types of components could share some logic, right?</p>
<p>They both can use arrays of objects for their content - a title, id, and content. For functionality, one would click on the title, set it as active, and the CSS would style up that item.</p>
<p>Perhaps an accordion component without using hooks would look something like this:</p>
<pre><code class="language-jsx">import React, { Fragment, Component } from "react";
import { caretDown, caretUp } from "./constants";
import LoadingComponent from "./loadingSpinner";
import "./styles.css";

export class AccordionWithStateComponent extends Component {
  constructor(props) {
    super(props);
    this.state = {
      items: props.items,
      activeItem: props.activeItem,
    };
  }

  setActiveItem(id) {
    const selectedId = id === this.state.activeItem ? 0 : id;
    this.setState({ activeItem: selectedId });
  }

  render() {
    if (this.state.items.length &#x3C; 1) return &#x3C;LoadingComponent />;

    return (
      &#x3C;dl className="accordion__container">
        {this.state.items.map(accordionItem => (
          &#x3C;Fragment key={accordionItem.id}>
            &#x3C;dt
              className="accordion__header"
              onClick={() => this.setActiveItem(accordionItem.id)}
            >
              {accordionItem.title}
              {this.state.activeItem === accordionItem.id ? caretUp : caretDown}
            &#x3C;/dt>
            &#x3C;dd
              className={`accordion__content  ${
                this.state.activeItem === accordionItem.id
                  ? "accordion--open"
                  : "accordion--closed"
              }`}
            >
              &#x3C;p>{accordionItem.content}&#x3C;/p>
            &#x3C;/dd>
          &#x3C;/Fragment>
        ))}
      &#x3C;/dl>
    );
  }
}

export default AccordionWithStateComponent;
</code></pre>
<p>Then, in some container you'd be passing the props like this:</p>
<pre><code class="language-jsx">&#x3C;AccordionWithStateComponent items={someArrayOfObjects} activeItem={1} />
</code></pre>
<p>The items are being passed as props and there's a function in the component to update the active item in the state. If it's already open, it sets the id as zero which for this examples' sake doesn't exist and leads to it closing the existing active accordion item.</p>
<p>That last bit, I wouldn't want to put into a tab component, though. A tab panel should always be active but that doesn't really matter with an accordion so we will adjust our logic for that.</p>
<p>###Creating a reusable util w/hooks</p>
<p>Since I know how I want both components to work and have identified their shared logic, I can begin to create a function that uses hooks.</p>
<p>The <code>useState</code> hook returns a pair of values: the initial state and the function that updates it - similar to the state example above <code>this.state = { activeItem: props.activeItem }</code> and <code>this.setState({ activeItem: id })</code>. You use array destructuring to get the values from <code>useState</code>.</p>
<pre><code class="language-jsx">const [activeItem, setActiveItem] = useState(selectedItem);
</code></pre>
<p>I created <code>useToggleUtil</code> which takes two arguments: <code>type</code> and <code>selectedItem</code>. The latter is the default selected item from the data which is what needs to get passed into the <code>useState</code> hook.</p>
<pre><code class="language-jsx">import { useState, useEffect } from "react";

export const useToggleUtil = (type, selectedItem) => {
  const [activeItem, setActiveItem] = useState(selectedItem);
  const [items, setItems] = useState([]);

  return [items, activeItem, setActiveItem];
};
</code></pre>
<p>I declared <code>items</code> as well which will initially be an empty array but we will set later using <code>useEffect</code>.</p>
<p>There's some slight logic modifications I want to add based on what <code>type</code> of component is trying to use the function, though. So, instead of passing <code>setActiveItem</code>, I'll write another function that and return it instead.</p>
<pre><code class="language-jsx">import { useState, useEffect } from "react";

export const useToggleUtil = (type, selectedItem) => {
  const [activeItem, setActiveItem] = useState(selectedItem);
  const [items, setItems] = useState([]);

  const changeActiveItem = id => {
    const isTabs = type === "tabs";
    const isAlreadyActive = activeItem === id;
    const idSelected = isAlreadyActive &#x26;&#x26; !isTabs ? 0 : id;
    setActiveItem(idSelected);
  };

  return [items, activeItem, changeActiveItem];
</code></pre>
<p>Next, I want to use <code>useEffect</code> to populate the <code>items</code> array. Once the data is fetched, I pass the array of items to the <code>setItems</code> function. The second argument is for dependencies which in this case is only <code>type</code>.</p>
<pre><code class="language-jsx">  useEffect(() => {
    const fetchData = async () => {
      const res = await fetch(
        `https://my-json-server.typicode.com/sceendy/fake-json/${type}Items`
      );
      const data = await res.json();
      setItems(data);
    };
    fetchData();
  }, [type]);
</code></pre>
<p>This hook will also go in the util function I created, <code>useToggleUtil</code> before the return statement.</p>
<h3>Using the util</h3>
<p>Now that I have completed that function, I can create some components to try it out. Both components should pass their <code>type</code> first and then I want them both to start with the first item set as active so I'll pass a <code>1</code>.</p>
<p><strong>SimpleAccordionComponent.jsx</strong></p>
<pre><code class="language-jsx">import React, { Fragment } from "react";
import { useToggleUtil } from "./useUtil";
import { caretDown, caretUp } from "./constants";
import LoadingComponent from "./loadingSpinner";
import "./styles.css";

export const SimpleAccordionComponent = () => {
  const [items, activeItem, setActiveItem] = useToggleUtil("accordion", 1);

  if (items.length &#x3C; 1) return &#x3C;LoadingComponent />;

  return (
    &#x3C;dl className="accordion__container">
      {items.map(accordionItem => (
        &#x3C;Fragment key={accordionItem.id}>
          &#x3C;dt
            className="accordion__header"
            onClick={() => setActiveItem(accordionItem.id)}
          >
            {accordionItem.title}
            {activeItem === accordionItem.id ? caretUp : caretDown}
          &#x3C;/dt>
          &#x3C;dd
            className={`accordion__content  ${
              activeItem === accordionItem.id
                ? "accordion--open"
                : "accordion--closed"
            }`}
          >
            &#x3C;p>{accordionItem.content}&#x3C;/p>
          &#x3C;/dd>
        &#x3C;/Fragment>
      ))}
    &#x3C;/dl>
  );
};

export default SimpleAccordionComponent;
</code></pre>
<p><strong>SimpleTabsComponent.jsx</strong></p>
<pre><code class="language-jsx">import React from "react";
import LoadingComponent from "./loadingSpinner";
import { useToggleUtil } from "./useUtil";
import "./styles.css";

export const SimpleTabsComponent = () => {
  const [tabs, activeTab, setActiveTab] = useToggleUtil("tabs", 1);

  if (tabs.length &#x3C; 1) return &#x3C;LoadingComponent />;

  const createTabs = () =>
    tabs.map(tab => (
      &#x3C;button
        key={`${tab.id}-tab`}
        role="tab"
        aria-selected={tab.id === activeTab}
        id={`${tab.id}-panel`}
        aria-controls={`${tab.id}-content-panel`}
        onClick={() => setActiveTab(tab.id, "tabs")}
        className={tab.id === activeTab ? "tab tab--selected" : "tab"}
      >
        {tab.title}
      &#x3C;/button>
    ));

  const createTabPanels = () =>
    tabs.map(tab => (
      &#x3C;div
        key={`${tab.id}-panel`}
        id={`${tab.id}-content-panel`}
        role="tabpanel"
        aria-labelledby={`${tab.id}-tab`}
        className={`tab__panel ${tab.id === activeTab ? "show" : "hide"}`}
      >
        &#x3C;p style={{ margin: 0 }}>{tab.content}&#x3C;/p>
      &#x3C;/div>
    ));

  return (
    &#x3C;article>
      &#x3C;div role="tablist" aria-orientation="horizontal">
        {createTabs()}
      &#x3C;/div>
      {createTabPanels()}
    &#x3C;/article>
  );
};

export default SimpleTabsComponent;
</code></pre>
<p>As you can see, this allows for simple reusability across components.</p>
<p>You can see the working result here and mess around with it as you please:</p>
<h3>Result:</h3>
<iframe src="https://codesandbox.io/embed/yv1z0z1zmx?autoresize=1&hidenavigation=1&view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></div></section></article></main><footer class="u--text-center"><p><a href="https://github.com/sceendy" target="_blank" rel="noopener noreferrer">github</a> <!-- -->|<!-- --> <a href="https://www.linkedin.com/in/sceendy/" target="_blank" rel="noopener noreferrer">linkedin</a> <!-- -->|<!-- --> <a href="https://codepen.io/sceendy" target="_blank" rel="noopener noreferrer">codepen</a><br/>© 2021</p></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2019/01-25-front-end-friday-react-hooks/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-dea0d845a721241f591d.js"],"app":["/app-dd1ac8466996539df542.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ed71891e67857d7128bf.js"],"component---src-pages-404-js":["/component---src-pages-404-js-003f5ad3dee9f12dbf63.js"],"component---src-pages-blog-js":[],"component---src-pages-goals-js":["/component---src-pages-goals-js-ed4169db00c788b85565.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b6dff42724ccccb75831.js"],"component---src-templates-post-js":["/component---src-templates-post-js-79f2d3b703f0e02d9f2f.js"]};/*]]>*/</script><script src="/polyfill-dea0d845a721241f591d.js" nomodule=""></script><script src="/component---src-templates-post-js-79f2d3b703f0e02d9f2f.js" async=""></script><script src="/40f2c7494120b20d44a1314385d207a616dd714f-94d45befc4d94b9ad0c0.js" async=""></script><script src="/app-dd1ac8466996539df542.js" async=""></script><script src="/framework-7d6d54381d658fb1dc5f.js" async=""></script><script src="/webpack-runtime-f7abbf0acb99d8d26251.js" async=""></script></body></html>