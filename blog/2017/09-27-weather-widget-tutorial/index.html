<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.246d67a4ef7e9adeefa5.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style data-href="/commons.4162f903d77c3c2730cc.css">:root{--yellow-color:#f7e233;--pink-color:#ff444b;--blue-color:#18c9f5;--base-height:1.4rem;--base-font-size:1rem;--sm:0.8750rem}@media (prefers-color-scheme:dark){html{background-color:#000;color:#fff}.btn,.tags,a{color:#fff!important}.tags{background-color:var(--pink-color)!important}img{opacity:.75;-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out}img:hover{opacity:1}}*{box-sizing:border-box}body,html{font-family:Source Sans Pro,system,system-ui,-apple-system,BlinkMacSystemFont,Roboto,Helvetica,Arial,sans-serif;font-size:var(--base-font-size);margin:0}h1{color:var(--pink-color);display:inline-block;padding:.75rem 0;margin:.25rem 0}h2{font-size:1.2rem;line-height:var(--base-height);text-transform:uppercase;color:var(--blue-color)}small{color:#666;display:block;font-size:var(--sm)}footer{margin-top:1.375rem}.post__body,ol,p{font-size:var(--base-font-size);line-height:var(--base-height);margin:calc(var(--base-height)/2) 0}img{max-width:100%}a{color:#4a4a4a;font-style:italic}a,strong{line-height:var(--base-height)}a:hover{color:#888}figure{margin:0}figcaption{line-height:1.45rem}figcaption p{color:#333}blockquote{border-left:4px solid var(--blue-color);font-size:1.125rem;font-style:italic;margin:.5rem calc(var(--base-font-size)*2);padding:var(--base-font-size)}hr{border:1px solid var(--pink-color);margin-top:calc(var(--base-font-size)*2)}img[on-error]{display:none}.home-layout__container{display:grid;grid-gap:var(--base-font-size);grid-template-areas:"image" "about" "portfolio" "blog-list" "sidebar"}.home-layout__main-img{grid-area:image}.home-layout__about{grid-area:about}@media screen and (min-width:48rem){.home-layout__about{padding:0 1rem}}.home-layout__portfolio{grid-area:portfolio}.home-layout__blog-list{grid-area:blog-list}.home-layout__sidebar{grid-area:sidebar}.secondary-layout__3-cols{display:grid;grid-column-gap:2rem;grid-template-columns:repeat(1,100%)}.header--archive{display:flex;align-items:center;justify-content:space-between}@media screen and (min-width:700px){h1{padding:.75rem calc(var(--base-font-size)*1.5)}.home-layout__container{grid-template-areas:"image image about about" "portfolio portfolio portfolio portfolio" "blog-list blog-list blog-list sidebar"}.secondary-layout__3-cols{grid-template-columns:repeat(3,1fr)}}.figure__image{display:block;min-height:144px;margin:.9rem auto}.btn{color:#000;border-bottom:4px solid var(--blue-color);font-style:normal;padding:calc(var(--base-font-size)/2) 2px;text-decoration:none;font-weight:600}.btn:hover{color:#fff;background-color:var(--blue-color)}.list--no-style,.task-list-item{list-style-type:none}.list--no-style{padding-left:0}.list--side-pink{border-left:4px solid var(--pink-color);padding:calc(var(--base-font-size)/2) var(--base-font-size);margin-left:.25rem}.list--side-pink li a{font-style:normal;display:flex;justify-content:space-between;padding:var(--base-font-size) calc(var(--base-font-size)/4);text-decoration:none}.list--side-pink li a:hover{color:var(--blue-color)}.list--side-pink li a div:first-child{max-width:60vw}.tags{border-radius:3px;display:inline-block;font-size:.75rem;line-height:var(--sm);background-color:#eee;margin:calc(var(--base-font-size)/2) calc(var(--base-font-size)/2) var(--base-font-size) 0;padding:calc(var(--base-font-size)/2)}.breadcrumbs{list-style-type:none;font-size:var(--sm);line-height:1.5714rem;padding-left:0;margin-top:0}.breadcrumbs li{display:inline-block}.breadcrumbs li~li:before{content:"//";margin-left:.5rem;margin-right:.5rem}.code-inline,:not(pre)>code[class*=language-]{background-color:#eee!important;border-radius:2px!important;border:1px solid #eee;line-height:22px;padding:0 .25rem;color:#1c92f2;font-family:monospace;font-size:.9rem;text-shadow:none}.twitter-tweet-rendered{margin-left:auto;margin-right:auto}.u--text-center{text-align:center}.u--padding-20{padding:20px}.u--padding-bottom-20{padding-bottom:20px}.img--responsive,.u--media-center{display:block;margin:0 auto}.img--responsive{max-width:100%}.goal__container{margin-bottom:1rem;font-size:.85rem;text-align:center;position:relative}.goal__container:last-of-type{margin-bottom:2rem}progress{display:block;width:100%;background-color:rgba(232,179,197,.16);border:0;height:1rem;border-radius:.5rem;margin-top:.25rem}progress[value]{-webkit-appearance:none;-moz-appearance:none;appearance:none}.goal__percentage{color:var(--pink-color);position:absolute;bottom:2.25px;right:.25rem;font-size:.75rem;font-weight:700;line-height:1}.goal__percentage--filled{color:#fff}progress::-webkit-progress-bar{background-color:rgba(232,179,197,.16);border-radius:.5rem}progress::-webkit-progress-value{background-color:var(--pink-color);border-top-left-radius:.5rem;border-bottom-left-radius:.5rem}progress[value]::-moz-progress-bar{background-color:var(--pink-color);border-top-left-radius:.5rem;border-bottom-left-radius:.5rem}progress[value="100"]{-webkit-appearance:none;-moz-appearance:none;appearance:none}progress[value="100"]::-webkit-progress-value{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}progress[value="100"]::-moz-progress-bar{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.gatsby-highlight{font-size:var(--sm)}</style><meta name="generator" content="Gatsby 2.15.20"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">JS tutorial #2 - a five day forecast widget - Cindy | Front-end Engineer</title><link data-react-helmet="true" rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFwSURBVHjavJfBrYMwDEDTry7Av/0rHYEV0hFYoRx7/BkBjj2GFTJCuwIjfK69lRGovxSkCDmJSU0sWQhDyKvt2s5hnmcRktfPzb2VoBd7LVavPkANaL8Yvp9XEZOjoMsvaBt4Lq1WoAp0onz0i7h5HdnclYuFFZwArdgm/wAlF0Dt+VgHegZtQAePJ1hyANu8t3F2E/Bv9U7F5QGJ2MzqfrQQsXXJObCbHBPXFYht2AtgQNwpkTCoFABKCEZPhpccIaAAGI9d5wKY3Pq+CoPOAbAUnckTCp0DYAwk2UcQW+pAbz3BCrG1ECluiJRKqGwD8kG0ewMs4WgCrVjuDRCD0DkAsLbstvA6VzfsPOWaFAZKM7ojzUkhEDplIKEAUH6JSQXgGkim1IUpAAXRxgbwQFxbIpNzbB3rRHR3sr/yHERII9qBcDYskZGbIic4G45cI1nHVBuSk1B5pqIt1fHjf0Fjj2ImUAvOgf6AyluAAQBrFE4nht1sxgAAAABJRU5ErkJggg=="/><meta data-react-helmet="true" name="description" content="I build web applications using JavaScript."/><meta data-react-helmet="true" name="keywords" content="software engineer, front-end, web development, javascript, angular, react, front-end engineer, front-end dev"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#FF4081"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a6c79a239ea6716fcb4fbc3b3216d26b"/><link as="script" rel="preload" href="/webpack-runtime-f50b06fe491f1e81fa20.js"/><link as="script" rel="preload" href="/app-8bb42254a366d3807241.js"/><link as="script" rel="preload" href="/commons-d502bca2b681c7221cfe.js"/><link as="script" rel="preload" href="/styles-d88c4b0301545a52526a.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-d3d4bae200363f1c91e6.js"/><link as="fetch" rel="preload" href="/page-data/blog/2017/09-27-weather-widget-tutorial/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><main style="margin:0 auto;max-width:50.8rem;padding:2.5rem 1.0875rem .05rem"><article><ul class="breadcrumbs"><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li>JS tutorial #2 - a five day forecast widget</li></ul><header><h2>JS tutorial #2 - a five day forecast widget</h2><div>September 27, 2017</div><div class="tags">dev</div><div class="tags">tutorial</div><div class="tags">beginner js</div></header><section><div class="post__body"><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">The world needs more beginning-to-end blogs on creating things like this player with HTML5/JS by <a href="https://twitter.com/sceendy?ref_src=twsrc%5Etfw">@sceendy</a>! Awesome. <a href="https://t.co/S87ekdB17l">https://t.co/S87ekdB17l</a></p>&mdash; Ben Lesh 🛋️👑🔥 (@BenLesh) <a href="https://twitter.com/BenLesh/status/832066726422417408?ref_src=twsrc%5Etfw">February 16, 2017</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Earlier this year, a <a href="/2017/01/29/a-basic-js-music-player.html">blog post</a> of mine got some attention from a Google engineer/RxJS development lead, Ben Lesh, which is pretty awesome. It remains my most read blog post, actually. I'd like to think people starting out with JavaScript found it useful since at the end they had something to show for it.</p>
<p>While I considered writing a part 2 where I'd have the music player interact with an open music API, the API's I looked at all required oAuth which some might find intimidating initially. Yes, oAuth is an incredibly common part of using open API's - but I would prefer to keep these tutorials pretty simple to cover the basics. Instead, I decided to make another common widget that would allow for me to make use of a simpler, open API.</p>
<h4>Overview</h4>
<p>Ah, the popular weather widget - you will find thousands of designs for them on <a href="https://dribbble.com/search?q=weather" target="_blank">dribbble</a>. For this widget, we will be using the <a href="http://openweathermap.org/forecast5">Open Weather Map API</a> to obtain their 5 day forecast data which we can render in our widget. For this example, I built out an existing design using HTML/CSS.</p>
<img src="https://i.imgur.com/woC7RA9.png" alt="Weather Widget Design" class="img--responsive" />
<br/>
<p>You can grab the <a href="https://jsfiddle.net/sceendy/nea4z7ff/embedded/css/" target="_blank">CSS for this (slightly modified) design</a> and use the following HTML:</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>component__weather-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>component__weather-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>weather-content__overview<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>weather-content__temp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>component__forecast-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>
<h4>Variables</h4>
<p>Just like in the <a href="/2017/01/29/a-basic-js-music-player.html">music player tutorial</a>, elements will be stored in variables. The variables will be referenced later when you want to render the data. </p>
<p></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">CURRENT_LOCATION</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'weather-content__overview'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CURRENT_TEMP</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'weather-content__temp'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">FORECAST</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'component__forecast-box'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<h4>Working with an application programming interface (API)</h4>
<p>Interacting with API's is an important part of web development. An API is essentially a messenger that receives requests and sends responses from the server. A <a href="https://www.youtube.com/watch?v=s7wmiS2mSXY" target="_blank">common, helpful analogy</a> is to think of an API as a waiter at a restaurant - the waiter (API) takes your request/order that tells the kitchen (system) and then delivers the food (response/data) back to you.</p>
<p>For this project, you will need to get an API key to access the Open Weather API. You can easily get your API key by <a href="https://home.openweathermap.org/users/sign_up" target="_blank">signing up</a>. An API key is a unique token that works as a method of authorization so that you can access the data from the API.</p>
<p>Once you've done that, store the API endpoint (a URL) for the <a href="http://openweathermap.org/forecast5" target="_blank">five day daily forecast</a> in a variable called <span class="code-inline">URL</span> and add your APP ID (your API key) to the API endpoint for the five day daily forecast for a city (I'm going to use Dallas). I've customized this endpoint to return 7 lines from the API call (<span class="code-inline">cnt=7</span>) and to use Fahrenheit (<span class="code-inline">units=imperial</span>). You can edit these parameters as you please by visiting the <a href="http://openweathermap.org/forecast5" target="_blank">API doc</a> to check the other options. Fill in the city and APP ID.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">"https://api.openweathermap.org/data/2.5/forecast/daily?"</span> <span class="token operator">+</span>
<span class="token string">"q=CITY&amp;cnt=7&amp;units=imperial&amp;APPID=YOUR_APP_ID"</span><span class="token punctuation">;</span></code></pre></div>
<p>Cool, now we know what we will be communicating with and how to access it.</p>
<h4>JavaScript: Fetch API</h4>
<p>The Fetch API provides you with a powerful JavaScript interface that gives you the ability to access and manipulate parts of a page easily. When making a request, a promise will be returned. A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">promise</a> allows you to trigger numerous requests at once and as they become ready, you can handle them. The promise will provide resolve and reject functions which you can call in the body based on the result. </p>
<p>TL;DR:</p>
<blockquote>A promise is an object that may produce a single value some time in the future: either a resolved value, or a reason that it’s not resolved (e.g., a network error occurred). <br/>- <strong>Eric Elliott</strong></blockquote>
<p>We can write a very simple fetch request - it'll take the path for the resource (the variable we named <span class="code-inline">URL</span>) as the first parameter. The second parameter allows you to control some settings such as declaring the method and headers. We will use the <span class="code-inline">GET</span> method and include a <span class="code-inline">Headers</span> object. (We don't need to append anything to the headers here but <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers" target="_blank">there are actions</a> you could take if you wanted to.)</p>
<p>Once that call is made, it returns a promise containing the response object. Let's see how this works in practice. </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getWeatherData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token punctuation">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    headers<span class="token punctuation">:</span> headers
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The promise gets a <span class="code-inline">then</span> method which allows you to react to the promise. We call the result <span class="code-inline">data</span> in line 6 and return the data in JSON format. Now, we can call that function, and once the promise is fulfilled successfully, use that JSON.</p>
<p>Returned data from promise:<br/><br/>
<img src="https://i.imgur.com/tSlVAfn.png" alt="Weather Data in JSON format" class="img--responsive" /></p>
<h4>JavaScript: The Promise</h4>
<p>Now that we have data, we want to attach a callback that passes that data so that we can start using it. We add a <span class="code-inline">then</span> method to the function and it will be passed the result of <span class="code-inline">data.json()</span> as <span class="code-inline">weatherData</span>.</p>
<p>Based on the design, we will want the name of the city, a description of the current weather, the current temperature, and the daily forecast (day + temp). We can store the relevant data as variables to be used in a function called <span class="code-inline">renderData()</span>.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">getWeatherData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">weatherData</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> city <span class="token operator">=</span> weatherData<span class="token punctuation">.</span>city<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">let</span> dailyForecast <span class="token operator">=</span> weatherData<span class="token punctuation">.</span>list<span class="token punctuation">;</span>

  <span class="token function">renderData</span><span class="token punctuation">(</span>city<span class="token punctuation">,</span> dailyForecast<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h4>JavaScript: Template Literals</h4>
<p>In the beginning of this post, we stored elements as variables. If you read Part One of this tutorial series, you are familiar with the <span class="code-inline">innerHTML</span> property that you can access on elements. This property allows you to get or set the HTML inside of the element. </p>
<p>In <span class="code-inline">renderData()</span>, you first store the weather for today to access it for the description and current temperature. As the design has the city name on the left with the description of the current weather below it, you want to write the HTML using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank">template literals</a>.</p>
<p>Template literals are string literals that allow you to embed expressions. Here (line 3), we place back-ticks instead of quotes in the <span class="code-inline">widgetHeader</span> identifier to include the data. You can write out HTML as you normally do and then use a dollar sign and curly braces to include the location (<span class="code-inline">${location}</span>) and current weather description (<span class="code-inline">${currentWeather.description}</span>). </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">renderData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">location<span class="token punctuation">,</span> forecast</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentWeather <span class="token operator">=</span> forecast<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>weather<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> widgetHeader <span class="token operator">=</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>location<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h1>&lt;small></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>currentWeather<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/small></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token constant">CURRENT_TEMP</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;i class="wi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">applyIcon</span><span class="token punctuation">(</span>currentWeather<span class="token punctuation">.</span>icon<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">&lt;/i>
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>forecast<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;i class="wi wi-degrees">&lt;/i></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token constant">CURRENT_LOCATION</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> widgetHeader<span class="token punctuation">;</span>

  <span class="token comment">// render each daily forecast</span>
  forecast<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">day</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span>dt <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Sun'</span><span class="token punctuation">,</span> <span class="token string">'Mon'</span><span class="token punctuation">,</span> <span class="token string">'Tues'</span><span class="token punctuation">,</span> <span class="token string">'Wed'</span><span class="token punctuation">,</span> <span class="token string">'Thurs'</span><span class="token punctuation">,</span> <span class="token string">'Fri'</span><span class="token punctuation">,</span> <span class="token string">'Sat'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> days<span class="token punctuation">[</span>date<span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> dayBlock <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dayBlock<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'forecast__item'</span><span class="token punctuation">;</span>
    dayBlock<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="forecast-item__heading"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div>
      &lt;div class="forecast-item__info">
      &lt;i class="wi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">applyIcon</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span>weather<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>icon<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">&lt;/i>
      &lt;span class="degrees"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span>temp<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      &lt;i class="wi wi-degrees">&lt;/i>&lt;/span>&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token constant">FORECAST</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dayBlock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since our <span class="code-inline">forecast</span> argument is an array, we use the <span class="code-inline">forEach()</span> method to iterate once over each item in that array. As we iterate over each element (which we name <span class="code-inline">day</span>), we are doing several things:</p>
<ul>
  <li>Converting the unix timestamp (<span class="code-inline">day.dt</span>) to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">an actual date</a></li>
  <li>Creating an array with the days of the week starting from Sunday</li>
  <li>Using the <span class="code-inline">getDay()</span> method on the date object, we get the day of the week (0-6)</li>
  <li>Get the index of the array from returned value of <span class="code-inline">getDay()</span> and store the day name</li>
</ul>
<p>Once we're done making new elements for each day that render the data, all that is left is using the <span class="code-inline">append()</span> method to insert our elements to the parent element (stored in <span class="code-inline">FORECAST</span>).</p>
<iframe width="100%" height="400" src="//jsfiddle.net/sceendy/nea4z7ff/embedded/result/dark/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></div></section></article></main><footer class="u--text-center"><p>built using <a href="https://gatsbyjs.org/" rel="noopener noreferrer" target="_blank">gatsby v2</a><br/>© 2019</p></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-25355768-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2017/09-27-weather-widget-tutorial/";window.webpackCompilationHash="9d766bdb57bea898420c";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8bb42254a366d3807241.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-cc4069c44608db5990ec.js"],"component---src-templates-post-js":["/component---src-templates-post-js-d3d4bae200363f1c91e6.js"],"component---src-pages-404-js":["/component---src-pages-404-js-cadcdef5abf4babd168e.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-1025b8d42f0b79236b8d.js"],"component---src-pages-goals-js":["/component---src-pages-goals-js-c60882345040c98fcf8c.js"],"component---src-pages-index-js":["/component---src-pages-index-js-bed20a76e1849a2ca65b.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-d3d4bae200363f1c91e6.js" async=""></script><script src="/styles-d88c4b0301545a52526a.js" async=""></script><script src="/commons-d502bca2b681c7221cfe.js" async=""></script><script src="/app-8bb42254a366d3807241.js" async=""></script><script src="/webpack-runtime-f50b06fe491f1e81fa20.js" async=""></script></body></html>